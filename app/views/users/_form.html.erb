<%= render partial: 'shared/errors', :locals => {:object => @user}%>
<div class="col-md-4">
  <%= form_for @user do |f| %>
      <%= render 'users/form_elements', f: f %>
      <div class="form-group">
        <h4>Groups</h4>
        <% hidden_field_tag "user[group_ids][]", nil %>
        <% Group.order('name').all.each do |group|%>
            <%= check_box_tag "user[group_ids][]", group.id, @user.group_ids.include?(group.id), id: dom_id(group) %>
            <%= label_tag dom_id(group), group.name %><br>
        <% end %>
      </div>
      <div class="form-group">
        <%= f.submit 'Save', class: 'btn btn-primary' %>
      </div>
  <% end %>
</div>